{
    "componentChunkName": "component---src-templates-work-detail-js",
    "path": "/interests/mongodb",
    "result": {"data":{"mdx":{"frontmatter":{"title":"MongoDB","slug":"mongodb","excerpt":"mongodb, mongoose를 활용한 CRUD api. node model을 생성한 후 각각의 CRUD api를 작성할 필요없이 사용가능하다.","github":null,"npmorg":null,"demo":"http://imcmaster.iptime.org:7000","videoSourceURL":null,"videoTitle":null,"featureImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQY0z3QS08TURTA8TOdQni4Md0ohNQ5w2ijdwY7mIaXpnTOHVszd6gPWIAoj5DIQu/EwgJYGWoij7kQTVx0ocYIG8LChZ/BnR9AP8yQqQ2Lk5Oz+Z3kD3rzJvBTsXC3Vc45rTK4WyWN3zaAGALZnWF4eXt3DKgVLTD6r8D79Rr8/vkOjqJQO4hCUFGoQfm8Nn7/RzUxjsb2rHgcIHmp+YX/ILcR/BHzEuUOQqUDftmdh60lD44b9RSE5kYd4igEsL5PNd1v00n+oPR3eA51kb+RrRTN3g6YFROFdHdzx0xB7ZFr6aND1/TTD4sZFYUilqKqpHCVFLNxJB7A9a9jDas1kQzu3fvDC8YAMVwiG+eJ4TTZOEkMA2L4ghjOkI2cGD4lhp7vmNVPG4+f7L8OTBWJnViK9TgSm5A9c68WPk/9GzosLS9ALueN4BoxrBPD522EYdgBF4nhdvshw2fcNvnHRn3l8E3gKSkqsRSvlBRzsHKyDL/OVT5JkgwAgF+0uohhV1C6lXbrflgcBt8xde60M6wSQ+K2mfEHB+D47UxPLEVf2lBJ0bcvA7gAdhV9yRc46k8AAAAASUVORK5CYII=","aspectRatio":3.389830508474576,"src":"/static/591197e1a119b4a36f3c3fb6f5a40af4/ee604/mongodb_logo.png","srcSet":"/static/591197e1a119b4a36f3c3fb6f5a40af4/69585/mongodb_logo.png 200w,\n/static/591197e1a119b4a36f3c3fb6f5a40af4/497c6/mongodb_logo.png 400w,\n/static/591197e1a119b4a36f3c3fb6f5a40af4/ee604/mongodb_logo.png 800w,\n/static/591197e1a119b4a36f3c3fb6f5a40af4/f3583/mongodb_logo.png 1200w,\n/static/591197e1a119b4a36f3c3fb6f5a40af4/8f577/mongodb_logo.png 1450w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"MongoDB\",\n  \"slug\": \"mongodb\",\n  \"seq\": 1,\n  \"type\": \"interest\",\n  \"language\": \"kr\",\n  \"featureImage\": \"../images/interest/mongodb_logo.png\",\n  \"thumb\": \"../images/interest/mongodb_logo.png\",\n  \"github\": null,\n  \"demo\": \"http://imcmaster.iptime.org:7000\",\n  \"videoSourceURL\": null,\n  \"videoTitle\": null,\n  \"excerpt\": \"mongodb, mongoose를 활용한 CRUD api. node model을 생성한 후 각각의 CRUD api를 작성할 필요없이 사용가능하다.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"|javascript|model|\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"var mongoose = require(\\\"mongoose\\\");\\nconst Schema = mongoose.Schema;\\nconst models = {};\\n\\nconst allpurposeSchema = new Schema({\\n  title: String,\\n  desc: String,\\n  formid: String,\\n  data: Schema.Types.Mixed,\\n  author: Schema.Types.Mixed,\\n});\\n\\nmodels.Allpurpose = mongoose.model(\\\"Allpurpose\\\", allpurposeSchema);\\n\\nmodule.exports = models;\\n\\n$$$$$|javascript|controller|\\uC7AC\\uC0AC\\uC6A9\\uAC00\\uB2A5\\uD55C CRUD\\uB85C \\uBAA8\\uB4E0 \\uBAA8\\uB378\\uC5D0\\uC11C \\uACF5\\uD1B5\\uC0AC\\uC6A9\\n\\uBAA8\\uB4E0 \\uBAA8\\uB378\\uC744 \\uD55C\\uACF3\\uC5D0\\uC11C \\uCC98\\uB9AC\\uD568\\n ./model/models.js /router/reuseCRUD.js\\uC5D0\\uC11C \\uC811\\uADFC\\uCC98\\uB9AC\\nconst express = require(\\\"express\\\");\\n\\nmodule.exports = (Collection) => {\\n  // ======\\n  // Create\\n  // ======\\n\\n  const create = (req, res) => {\\n    const newEntry = req.body;\\n    Collection.create(newEntry, (e, newEntry) => {\\n      if (e) {\\n        console.log(e);\\n        res.sendStatus(500);\\n      } else {\\n        res.send(newEntry);\\n      }\\n    });\\n  };\\n\\n  // =========\\n  // Read many\\n  // =========\\n\\n  const readMany = (req, res) => {\\n    let query = res.locals.query || {};\\n\\n    Collection.find(query, (e, result) => {\\n      if (e) {\\n        res.status(500).send(e);\\n        console.log(e.message);\\n      } else {\\n        res.send(result);\\n      }\\n    });\\n  };\\n\\n  // ========\\n  // Read one\\n  // ========\\n  const readOne = (req, res, next) => {\\n    /* reqest.query \\uACBD\\uC6B0\\n          \\uC608: http://localhost:3001/reuse/control/:_id?ctrid=gggg\\n          \\uC608: http://localhost:3001/reuse/control/:1?ctrid=gggg\\n          req.param\\uC5D0 \\uC22B\\uC790\\uAC00 \\uC788\\uB294 \\uACBD\\uC6B0 \\uC22B\\uC790\\uAC1C\\uB9CC \\uB9AC\\uD134 1=>1\\uAC1C\\n        */\\n    let { _id } = req.params;\\n    if (Object.keys(req.query).length > 0) {\\n      var query = Collection.find(req.query);\\n      if (typeof parseInt(_id) === \\\"number\\\") query = query.limit(parseInt(_id));\\n      query.exec(function (err, someValue) {\\n        if (err) return next(err);\\n        res.send(someValue);\\n      });\\n      return null;\\n    }\\n    /* request.param \\uACBD\\uC6B0\\n          \\uC608: http://localhost:3001/reuse/control/:_id\\n          control/:_id\\n        */\\n\\n    Collection.findById(_id, (e, result) => {\\n      if (e) {\\n        res.status(500).send(e);\\n        console.log(e.message);\\n      } else {\\n        //res.send(result);\\n        res.send(result);\\n      }\\n    });\\n  };\\n\\n  // ======\\n  // Update\\n  // ======\\n  const update = (req, res) => {\\n    const keycode = Object.keys(req.query);\\n    const changedEntry = req.body;\\n\\n    // ======\\n    // MultiUpdate: array\\uB85C batch update\\uCC98\\uB9AC\\n    // url\\uC740 \\\"/mutiupdate?id=\\\"\\uACFC \\uAC19\\uC774 \\uC804\\uC1A1\\n    // \\uD604\\uC7AC\\uB294 multiupdate\\uC2DC querystring 1\\uAC1C\\uB9CC \\uAC00\\uB2A5!!!!!!!!!! \\uC218\\uC815\\uD560\\uAC83\\n    // ======\\n    if (req.params._id == \\\"multiupdate\\\") {\\n      let bulk = Collection.collection.initializeUnorderedBulkOp();\\n      changedEntry.forEach((k, i) => {\\n        bulk\\n          .find({\\n            [keycode]: k[keycode],\\n          })\\n          .upsert()\\n          .update({ $set: k });\\n      });\\n\\n      bulk.execute((e, result) => {\\n        if (e) {\\n          res.status(500).send(e);\\n          console.log(e.message);\\n        } else {\\n          res.send(result);\\n        }\\n      });\\n      return false;\\n    }\\n\\n    //single update\\uC778 \\uACBD\\uC6B0\\n    let query = { _id: req.params._id };\\n    if (keycode.length > 0) {\\n      //querystring\\uC774 \\uC788\\uC744 \\uACBD\\uC6B0 query\\uB97C \\uB300\\uCCB4\\uD568\\n      //localhost:3001/menu/<req.param._id>?qrystring=value\\n      query = req.query;\\n    }\\n    Collection.update(query, { $set: changedEntry }, (e) => {\\n      if (e) res.sendStatus(500);\\n      else res.sendStatus(200);\\n    });\\n  };\\n\\n  // ======\\n  // Remove\\n  // ======\\n  const remove = (req, res) => {\\n    let query = { _id: req.params._id };\\n    //querystring\\uC774 \\uC788\\uC744 \\uACBD\\uC6B0 query\\uB97C \\uB300\\uCCB4\\uD568\\n    if (Object.keys(req.query).length > 0) {\\n      query = req.query;\\n    }\\n    Collection.deleteOne(query, (e) => {\\n      if (e) res.status(500).send(e);\\n      else res.sendStatus(200);\\n    });\\n  };\\n\\n  // ======\\n  // Routes\\n  // ======\\n  let router = express.Router();\\n  router.get(\\\"/\\\", readMany);\\n  router.get(\\\"/:_id\\\", readOne);\\n  router.post(\\\"/\\\", create);\\n  router.put(\\\"/:_id\\\", update);\\n  router.delete(\\\"/:_id\\\", remove);\\n  return router;\\n};\\n\")), mdx(\"p\", null, \"|javascript|route|path\\uBCC4\\uB85C controller\\uC640 model\\uC744 \\uC9C0\\uC815\\uD574\\uC900\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const crud = require(\\\"../controllers/reuseCRUD\\\");//controller\\n//route index\\uC5D0\\uC11C express \\uC804\\uC1A1(app)\\nmodule.exports = (app) => {\\n  const model = require(\\\"../models/model\\\");\\n  app.use(\\\"/allpurpose\\\", crud(model.Control));\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"mongodb","locale":"ko","hrefLang":"ko-KR","originalPath":"/interests/mongodb","dateFormat":"YYYY-MM-DD"}},
    "staticQueryHashes": ["1239077767","2744905544","3280999885"]}